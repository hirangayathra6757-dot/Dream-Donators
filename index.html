<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dream Donators — By GCC Media</title>
  <style>
    :root{--bg:#f2f6ff;--bg2:#dce7ff;--card:#ffffff;--text:#2b2d42;--muted:#6b7280;--accent:#2563eb;--accent2:#3b82f6;--radius:20px;--shadow:0 10px 30px rgba(0,0,0,0.08);font-family:'Poppins',sans-serif}
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,var(--bg),var(--bg2));color:var(--text)}

    header{position:sticky;top:0;padding:14px 20px;background:rgba(255,255,255,0.9);backdrop-filter:blur(10px);z-index:50}
    .nav{max-width:1200px;margin:auto;display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center}
    .logo{width:48px;height:48px;border-radius:14px;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:800;color:white}
    nav a{text-decoration:none;margin:6px 12px;font-weight:600;color:var(--text)}

    .hero{max-width:1200px;margin:30px auto;display:grid;grid-template-columns:1fr 1fr;gap:30px;align-items:center;padding:0 20px}
    .hero h1{font-size:38px;color:var(--accent);margin:0}
    .hero-img{height:340px;border-radius:var(--radius);background-size:cover;background-position:center;box-shadow:var(--shadow)}

    .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:26px;margin:20px auto}
    label{font-weight:600;font-size:14px}
    input,textarea{width:100%;padding:12px;border-radius:12px;border:1px solid #ddd;margin-top:6px;font-size:16px}

    .btn{padding:12px 18px;border-radius:var(--radius);border:0;background:var(--accent);color:white;font-weight:700;cursor:pointer;width:fit-content}
    .btn:hover{background:var(--accent2)}

    .checkbox-group{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px}

    .donor-item{display:flex;gap:12px;background:#f7faff;padding:12px;border-radius:14px;margin-bottom:8px}
    .avatar{width:44px;height:44px;border-radius:12px;background:#60a5fa;color:white;display:flex;align-items:center;justify-content:center;font-weight:700}

    footer{text-align:center;color:var(--muted);padding:30px}

    @media(max-width:900px){
      header{position:relative}
      .hero{grid-template-columns:1fr;text-align:center}
      .hero h1{font-size:28px}
      .btn{width:100%}
    }
  </style>
</head>
<body>

<header>
  <div class="nav">
    <div style="display:flex;gap:10px;align-items:center">
      <div class="logo">DD</div><strong>Dream Donators</strong>
    </div>
    <nav>
      <a href="#home">Home</a>
      <a href="#donate">Donate</a>
      <a href="#help">Student Help</a>
      <a href="#wall">Donors</a>
      <a href="#admin">Admin</a>
    </nav>
  </div>
</header>

<section class="hero" id="home">
  <div>
    <h1>Be the reason a child smiles again</h1>
    <p>Help students in Sri Lanka with uniforms, books, shoes, and bags.</p>
    <button class="btn" onclick="document.getElementById('donate').scrollIntoView({behavior:'smooth'})">Donate Now</button>
  </div>
  <div class="hero-img" id="heroImg"></div>
</section>

<section id="donate" style="max-width:900px;padding:0 20px;margin:auto">
  <div class="card">
    <h2>Make a Donation</h2>
    <form id="donationForm">
      <label>Full Name *</label><input id="name" required>
       <label>NIC *</label><input id="NIC" required>
      <label>Email *</label><input id="email" required>
      <label>Phone *</label><input id="phone" required>
      <label>Donation Type *</label>
      <div class="checkbox-group">
        <label><input type="checkbox" value="Uniforms" class="donType"> Uniforms</label>
        <label><input type="checkbox" value="Books" class="donType"> Books</label>
        <label><input type="checkbox" value="Shoes" class="donType"> Shoes</label>
        <label><input type="checkbox" value="Bags" class="donType"> Bags</label>
      </div>
      <label>Quantity / Details</label><input id="qty">
      <button class="btn" type="submit">Submit Donation</button>
      <div id="formMsg"></div>
    </form>
  </div>
</section>

<section id="help" style="max-width:900px;padding:0 20px;margin:auto">
  <div class="card">
    <h2>Student Help Request</h2>
    <form id="helpForm">
      <label>Student Name *</label><input id="sname" required>
      <label>School *</label><input id="school" required>
      <label>District *</label><input id="sdistrict" required>
      <label>Parent Name *</label><input id="parentName" required>
      <label>Parent Phone *</label><input id="parentPhone" required>
      <label>What do you need? *</label><textarea id="need"></textarea>
      <button class="btn" type="submit">Submit Request</button>
      <div id="helpMsg"></div>
    </form>
  </div>
</section>

<section id="wall" style="max-width:900px;padding:0 20px;margin:auto">
  <div class="card">
    <h2>Recent Donors</h2>
    <div id="publicWall"></div>
  </div>
</section>

<section id="admin" style="max-width:500px;padding:0 20px;margin:auto">
  <div class="card">
    <h2>Admin Login</h2>
    <input id="adminUser" placeholder="Username">
    <input id="adminPass" type="password" placeholder="Password">
    <button class="btn" onclick="window.adminLogin()">Login</button>
    <div id="adminMsg"></div>
  </div>
</section>

<section id="adminPanel" style="display:none;max-width:1000px;padding:0 20px;margin:auto">
  <div class="card">
    <h2>Admin Dashboard</h2>
    <h3>Donations</h3><div id="allDonors"></div>
    <h3>Student Requests</h3><div id="allRequests"></div>
    <button class="btn" onclick="window.logout()">Logout</button>
  </div>
</section>

<section id="contact" style="max-width:900px;padding:0 20px;margin:auto">
  <div class="card">
    <h2>Contact Us</h2>
    <p>If you would like to support this project or need more information, please contact us.</p>
    <p><strong>Organization:</strong> Dream Donators — By GCC Media</p>
    <p><strong>Email:</strong> dreamdonators@gmail.com</p>
    <p><strong>Phone:</strong> +94 XX XXX XXXX</p>
    <p><strong>Location:</strong> Sri Lanka</p>
  </div>
</section>

<footer>© Dream Donators — By GCC Media</footer>

<script type="module">
import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';
import { getFirestore, collection, addDoc, getDocs, query, orderBy } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';

const firebaseConfig={apiKey:"AIzaSyAVUIIwFXEsOmOS96lifn_aEccV3I35bWU",authDomain:"dream-donators.firebaseapp.com",projectId:"dream-donators",storageBucket:"dream-donators.firebasestorage.app",messagingSenderId:"943510265596",appId:"1:943510265596:web:25e49411973c046bf50179"};
const app=initializeApp(firebaseConfig);
const db=getFirestore(app);

document.getElementById('heroImg').style.backgroundImage="url('https://images.unsplash.com/photo-1601758123927-2f2d7dc237b4')";

function esc(s){return String(s||'').replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[c]);}

async function renderPublicWall(){
  const wall=document.getElementById('publicWall');wall.innerHTML='';
  const snap=await getDocs(query(collection(db,'donators'),orderBy('date','desc')));
  snap.forEach(d=>{const v=d.data();wall.innerHTML+=`<div class="donor-item"><div class="avatar">${esc(v.name[0])}</div><div><strong>${esc(v.name)}</strong><div>${esc(v.type)}</div></div></div>`});
}

window.adminLogin=function(){
  const u=adminUser.value,p=adminPass.value;
  if(u==='Hiran'&&p==='Hiran@6757'){adminPanel.style.display='block';admin.style.display='none';loadAdmin();}
  else adminMsg.textContent='Invalid login';
}

window.logout=function(){adminPanel.style.display='none';admin.style.display='block'}

async function loadAdmin(){
  const dSnap=await getDocs(collection(db,'donators'));
  allDonors.innerHTML='';dSnap.forEach(d=>{const v=d.data();allDonors.innerHTML+=`<div>${esc(v.name)} - ${esc(v.type)}</div>`});
  const sSnap=await getDocs(collection(db,'students'));
  allRequests.innerHTML='';sSnap.forEach(d=>{const v=d.data();allRequests.innerHTML+=`<div>${esc(v.sname)} - ${esc(v.need)}</div>`});
}

donationForm.addEventListener('submit',async e=>{e.preventDefault();const types=[...document.querySelectorAll('.donType:checked')].map(x=>x.value).join(', ');await addDoc(collection(db,'donators'),{name:name.value,email:email.value,phone:phone.value,type:types,qty:qty.value,date:new Date()});formMsg.textContent='Saved';donationForm.reset();renderPublicWall();});

helpForm.addEventListener('submit',async e=>{e.preventDefault();await addDoc(collection(db,'students'),{sname:sname.value,school:school.value,district:sdistrict.value,parentName:parentName.value,parentPhone:parentPhone.value,need:need.value,date:new Date()});helpMsg.textContent='Request sent';helpForm.reset();});

renderPublicWall();
</script>
</body>
</html>

